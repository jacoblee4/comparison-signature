// Generate PDF using GlideSysAttachment approach
try {
    gs.info('SIGNATURE HELPER PDF: Creating PDF attachment...');
    
    // Create a temporary file name
    var fileName = 'Authority_Limits_Comparison_' + parent.number + '.pdf';
    
    // Use GlideSysAttachment to create the PDF
    var sa = new GlideSysAttachment();
    
    // Convert HTML to PDF and attach directly to the parent record
    var pdfGenerator = new sn_pdfgeneratorutils.PDFGenerationAPI();
    var pdfBytes = pdfGenerator.convertToPDFBytes(htmlContent);
    
    gs.info('SIGNATURE HELPER PDF: PDF bytes generated, creating attachment...');
    
    if (!pdfBytes) {
        gs.error('SIGNATURE HELPER PDF: Failed to generate PDF bytes');
        return null;
    }
    
    // Write the PDF to the parent record
    var attachmentSysId = sa.write(
        parent,                                      // GlideRecord to attach to
        fileName,                                    // File name
        'application/pdf',                           // Content type
        pdfBytes                                     // PDF content as bytes
    );
    
    if (!attachmentSysId) {
        gs.error('SIGNATURE HELPER PDF: Failed to create attachment');
        return null;
    }
    
    gs.info('SIGNATURE HELPER PDF: Successfully created PDF attachment with sys_id = ' + attachmentSysId);
    return attachmentSysId.toString();
    
} catch (e) {
    gs.error('SIGNATURE HELPER PDF: Exception during PDF generation: ' + e.message);
    gs.error('SIGNATURE HELPER PDF: Exception stack: ' + e.stack);
    return null;
}
